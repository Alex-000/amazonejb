<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" template="../index.xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

	<ui:define name="client-list">


		<div class="container">
			
<!-- 			Un seul form plusieur submit -->
			<h:form id="formListClient">
				
	<!-- 			le modal de confirmation -->
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					<p:commandButton value="Yes" type="button"
							styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					<p:commandButton value="No" type="button"
							styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</p:confirmDialog>
				
<!-- 				<p:dialog header="Edition client" widgetVar="client-edit" modal="true" showEffect="fade" hideEffect="puff" resizable="false"> -->
<!-- 			        <p:outputPanel id="carDetail" style="text-align:center;"> -->
<!-- 			            <p:panelGrid  columns="2" rendered="#{not empty dtSelectionView.selectedCar}" columnClasses="label,value"> -->
<!-- 			                <f:facet name="header"> -->
<!-- 			                    <p:graphicImage name="demo/images/car/#{dtSelectionView.selectedCar.brand}-big.gif"/>  -->
<!-- 			                </f:facet> -->
			 
<!-- 			                <h:outputText value="Id:" /> -->
<!-- 			                <h:outputText value="#{dtSelectionView.selectedCar.id}" /> -->
			 
<!-- 			                <h:outputText value="Year" /> -->
<!-- 			                <h:outputText value="#{dtSelectionView.selectedCar.year}" /> -->
			 
<!-- 			                <h:outputText value="Color:" /> -->
<!-- 			                <h:outputText value="#{dtSelectionView.selectedCar.color}" style="color:#{dtSelectionView.selectedCar.color}"/> -->
			 
<!-- 			                <h:outputText value="Price" /> -->
<!-- 			                <h:outputText value="$#{dtSelectionView.selectedCar.price}" /> -->
<!-- 			            </p:panelGrid> -->
<!-- 			        </p:outputPanel> -->
<!-- 			    </p:dialog> -->
			    
			    <p:dialog header="Edition Client" widgetVar="client-edit2"  modal="true" showEffect="fade" hideEffect="puff" focus="nom">
			        
<!-- 			        sinon on perd l'id meme avec l'inputext en disabled -->
			        <h:inputHidden value="#{clientManagedBean.client.id}" />
			        
			        <h:panelGrid columns="2" cellpadding="5">
			        
			        	<h:outputLabel for="id" value="Id:" />
			            <p:inputText id="id" label="id" disabled="true" value="#{clientManagedBean.client.id}" />
			                
			            <h:outputLabel for="nom" value="Nom:" />
			            <p:inputText id="nom" label="nom" value="#{clientManagedBean.client.nom}" />
			 
			            <h:outputLabel for="prenom" value="Prenom:" />
			            <p:inputText id="prenom" label="prenom" value="#{clientManagedBean.client.prenom}" />
			 
			            <h:outputLabel for="dateNaissance" value="Date de Naissance:" />
			            <p:inputText id="dateNaissance" label="dateNaissance" value="#{clientManagedBean.client.dateNaissance}" />
			            
			            <f:facet name="footer">
			            	<h:panelGroup style="display:block; text-align:center">
			                <p:commandButton value="Valider" update="formListClient" actionListener="#{clientManagedBean.update()}" icon="ui-icon-check" />
			                </h:panelGroup>
			            </f:facet>
            
			        </h:panelGrid>
			    </p:dialog>
				
	<!-- 				<p:growl id="growl" life="2000" /> -->
				
				
				<p:dataTable headerClass="header" styleClass="table table-striped" draggableColumns="true"
					 value="#{clientManagedBean.clients}" var="client" draggableRows="true"
					 rows="10"  paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="5,10,15">
					 
					<f:facet name="header">
				           Client 
				    </f:facet>
				    
				    <p:column style="width:60px">
						<f:facet name="header">Id</f:facet>	
						#{client.id}
					</p:column>
					
					<p:column>
						<f:facet name="header">Login</f:facet>
						#{client.login}
					</p:column>
					
					<p:column>
						<f:facet name="header">Password</f:facet>
						#{client.password}
					</p:column>
					
					<p:column>
						<f:facet name="header">User</f:facet>
						<h:outputText value="#{client.roles.get(0).role}" rendered="#{not empty client.roles and client.roles.size() >= 1}" />
						
					</p:column>
					
					<p:column>
						<f:facet name="header">Admin</f:facet>
						<h:outputText value="#{client.roles.get(1).role}" rendered="#{not empty client.roles and client.roles.size() >= 2}" />
					</p:column>
					
					<p:column>
						<f:facet name="header">Nom</f:facet>	
						#{client.nom}
					</p:column>
					
					<p:column>
						<f:facet name="header">Prenom</f:facet>
						#{client.prenom}
					</p:column>
					
					<p:column>
						<f:facet name="header">Date de naissance</f:facet>
						#{client.dateNaissance}
					</p:column>
	
					
			        
					<p:column  style="width:100px;text-align: center">
						<f:facet name="header">Action</f:facet>
	
	<!-- 					pour la boite de dialogue de confirmation -->
						<p:growl id="message" showDetail="true" />
								
				             <p:commandButton update="formListClient" oncomplete="PF('client-edit2').show()" icon="	ui-icon-pencil" title="View">
				                <f:setPropertyActionListener value="#{client}" target="#{clientManagedBean.client}" />
				            </p:commandButton>
				       
			        		
						<p:commandButton actionListener="#{clientManagedBean.remove()}"
								 update="message formListClient" icon="ui-icon-closethick">
							<p:confirm header="Confirmation" message="Are you sure?"
									icon="ui-icon-alert" />
						</p:commandButton>
					</p:column>
					
					<f:facet name="footer">
<!-- 						<p:commandButton value="Ajouter un client" id="withIcon" -->
<!-- 							action="/client/client.jsf" icon="ui-icon-disk" /> -->
							
						<p:commandButton update="formListClient" oncomplete="PF('client-edit2').show()" value="Ajouter un client" icon="ui-icon-plusthick" title="View">
				            <f:setPropertyActionListener value="" target="#{clientManagedBean.client}" />
				        </p:commandButton>
					</f:facet>
					
				</p:dataTable>
				
					

			</h:form>
		</div>

	</ui:define>
</ui:composition>